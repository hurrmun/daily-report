(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,r){},28:function(e,t,r){},49:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(22),c=r.n(s),o=(r(27),r(3)),l=(r(28),r(2)),i=r(0),d=function(){return localStorage.getItem("authToken")?Object(i.jsx)(l.b,{}):Object(i.jsx)(l.a,{replace:!0,to:"/login"})},u=r(7),m=r.n(u),j=r(8),b=r(9),h=r.n(b),g=function(){var e=Object(l.h)(),t=Object(a.useState)(""),r=Object(o.a)(t,2),n=(r[0],r[1]),s=Object(a.useState)(""),c=Object(o.a)(s,2),d=c[0],u=c[1];return Object(a.useEffect)((function(){localStorage.getItem("authToken")||e("/login",{replace:!0});var t=function(){var e=Object(j.a)(m.a.mark((function e(){var t,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}},e.prev=1,e.next=4,h.a.get("/api/private",t);case 4:r=e.sent,a=r.data,u(a.data),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),localStorage.removeItem("authToken"),n("You are not authorized please login");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();t()}),[]),Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{children:d})})},p=r(6),x=function(e){var t=Object(l.h)(),r=Object(a.useState)(""),n=Object(o.a)(r,2),s=n[0],c=n[1],d=Object(a.useState)(""),u=Object(o.a)(d,2),b=u[0],g=u[1],x=Object(a.useState)(""),O=Object(o.a)(x,2),f=O[0],v=O[1];Object(a.useEffect)((function(){localStorage.getItem("authToken")&&t("/",{replace:!0})}),[t]);var w=function(){var r=Object(j.a)(m.a.mark((function r(a){var n,c,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.preventDefault(),n={header:{"Content-Type":"application/json"}},r.prev=2,r.next=5,h.a.post("/api/auth/login",{email:s,password:b},n);case 5:c=r.sent,o=c.data,localStorage.setItem("authToken",o.token),e.setLoggedIn(!0),t("/",{replace:!0}),r.next=17;break;case 12:r.prev=12,r.t0=r.catch(2),console.log(r.t0),v(r.t0.response.data.error),setTimeout((function(){v("")}),5e3);case 17:case"end":return r.stop()}}),r,null,[[2,12]])})));return function(e){return r.apply(this,arguments)}}();return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"max-w-4xl lg:max-w-7xl mx-auto pt-4 px-4 sm:pt-6 lg:px-8",children:Object(i.jsx)("form",{onSubmit:w,children:Object(i.jsxs)("div",{className:"grid grid-cols-1 justify-items-center text-midnight",children:[Object(i.jsx)("h3",{className:"text-midnight text-4xl font-bold mb-4",children:"Log In"}),f&&Object(i.jsx)("span",{className:"text-white bg-brown-sugar",children:f}),Object(i.jsxs)("div",{className:"form-group mt-2 w-80",children:[Object(i.jsx)("label",{htmlFor:"email",className:"font-semibold text-lg text-pine-green",children:"Email"}),Object(i.jsx)("input",{type:"email",required:!0,id:"email",placeholder:"Enter Email",value:s,onChange:function(e){return c(e.target.value)},className:"border border-shamrock-green rounded-sm w-full h-8 pl-2 placeholder-opacity-50 placeholder-shamrock-green"})]}),Object(i.jsxs)("div",{className:"form-group mt-2 w-80",children:[Object(i.jsx)("label",{htmlFor:"password",className:"font-semibold text-lg text-pine-green",children:"Password"}),Object(i.jsx)("input",{type:"password",required:!0,id:"password",placeholder:"Enter Password",value:b,onChange:function(e){return g(e.target.value)},className:"border border-shamrock-green rounded-sm w-full h-8 pl-2 placeholder-opacity-50 placeholder-shamrock-green"})]}),Object(i.jsx)("button",{type:"submit",className:"mt-4 bg-shamrock-green rounded-sm w-80 text-white font-lg py-2 font-bold hover:bg-brown-sugar",children:"Log In"}),Object(i.jsx)("div",{className:"grid justify-items-center w-80",children:Object(i.jsxs)("span",{className:"text-red-600 text-sm mt-4",children:["Don't have an account?",Object(i.jsxs)(p.b,{to:"/register",className:"font-bold hover:text-brown-sugar",children:[" ","Register new account"]})]})})]})})})})},O=function(e){var t=Object(l.h)(),r=Object(a.useState)(""),n=Object(o.a)(r,2),s=n[0],c=n[1],d=Object(a.useState)(""),u=Object(o.a)(d,2),b=u[0],g=u[1],x=Object(a.useState)(""),O=Object(o.a)(x,2),f=O[0],v=O[1],w=Object(a.useState)(""),N=Object(o.a)(w,2),k=N[0],y=N[1],S=Object(a.useState)(""),I=Object(o.a)(S,2),T=I[0],C=I[1];Object(a.useEffect)((function(){localStorage.getItem("authToken")&&t("/",{replace:!0})}),[t]);var F=function(){var r=Object(j.a)(m.a.mark((function r(a){var n,c,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),n={header:{"Content-Type":"application/json"}},f===k){r.next=7;break}return v(""),y(""),setTimeout((function(){C("")}),5e3),r.abrupt("return",C("Passwords do not match"));case 7:if(!(f.length<6)){r.next=12;break}return v(""),y(""),setTimeout((function(){C("")}),5e3),r.abrupt("return",C("Passwords must be at least 6 characters"));case 12:return r.prev=12,r.next=15,h.a.post("/api/auth/register",{username:s,email:b,password:f},n);case 15:c=r.sent,o=c.data,console.log(o.token),localStorage.setItem("authToken",o.token),e.setLoggedIn(!0),t("/",{replace:!0}),r.next=28;break;case 23:r.prev=23,r.t0=r.catch(12),console.log(r.t0),C(r.t0.response.data.error),setTimeout((function(){C("")}),5e3);case 28:case"end":return r.stop()}}),r,null,[[12,23]])})));return function(e){return r.apply(this,arguments)}}();return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"max-w-4xl lg:max-w-7xl mx-auto pt-4 px-4 sm:pt-6 lg:px-8",children:Object(i.jsx)("form",{onSubmit:F,children:Object(i.jsxs)("div",{className:"grid grid-cols-1 justify-items-center text-midnight",children:[Object(i.jsx)("h3",{className:"text-midnight text-4xl font-bold mb-4",children:"Register Account"}),T&&Object(i.jsx)("span",{className:"text-white bg-brown-sugar",children:T}),Object(i.jsxs)("div",{className:"form-group mt-2 w-80",children:[Object(i.jsx)("label",{htmlFor:"username",className:"font-semibold text-lg text-pine-green",children:"Username"}),Object(i.jsx)("input",{type:"text",required:!0,id:"username",placeholder:"Enter Username",value:s,onChange:function(e){return c(e.target.value)},className:"border border-shamrock-green rounded-sm w-full h-8 pl-2 placeholder-opacity-50 placeholder-shamrock-green"})]}),Object(i.jsxs)("div",{className:"form-group mt-2 w-80",children:[Object(i.jsx)("label",{htmlFor:"email",className:"font-semibold text-lg text-pine-green",children:"Email"}),Object(i.jsx)("input",{type:"email",required:!0,id:"email",placeholder:"Enter Email",value:b,onChange:function(e){return g(e.target.value)},className:"border border-shamrock-green rounded-sm w-full h-8 pl-2 placeholder-opacity-50 placeholder-shamrock-green"})]}),Object(i.jsxs)("div",{className:"form-group mt-2 w-80",children:[Object(i.jsx)("label",{htmlFor:"password",className:"font-semibold text-lg text-pine-green",children:"Password"}),Object(i.jsx)("input",{type:"password",required:!0,id:"password",placeholder:"Enter Password",value:f,onChange:function(e){return v(e.target.value)},className:"border border-shamrock-green rounded-sm w-full h-8 pl-2 placeholder-opacity-50 placeholder-shamrock-green"})]}),Object(i.jsxs)("div",{className:"form-group mt-2 w-80",children:[Object(i.jsx)("label",{htmlFor:"confirmPassword",className:"font-semibold text-lg text-pine-green",children:"Confirm Password"}),Object(i.jsx)("input",{type:"password",required:!0,id:"confirmPassword",placeholder:"Confirm Password",value:k,onChange:function(e){return y(e.target.value)},className:"border border-shamrock-green rounded-sm w-full h-8 pl-2 placeholder-opacity-50 placeholder-shamrock-green"})]}),Object(i.jsx)("button",{type:"submit",className:"mt-4 bg-shamrock-green rounded-sm w-80 text-white font-lg py-2 font-bold hover:bg-brown-sugar",children:"Register"}),Object(i.jsx)("div",{className:"grid justify-items-center w-80",children:Object(i.jsxs)("span",{className:"text-red-600 text-sm mt-4",children:["Already have an account?",Object(i.jsxs)(p.b,{to:"/login",className:"font-bold hover:text-brown-sugar",children:[" ","Login"]})]})})]})})})})},f=function(e){var t=Object(l.h)(),r=localStorage.getItem("authToken"),a=function(e){return Object(i.jsx)("button",{onClick:e.logoutHandler,className:"mx-3 font-medium text-white hover:text-midnight",children:"Logout"})};return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("nav",{className:"bg-shamrock-green fixed w-full py-4 z-10",children:Object(i.jsx)("div",{className:"max-w-5xl lg:max-w-12xl mx-auto",children:Object(i.jsxs)("div",{className:"flex justify-between",children:[Object(i.jsx)(p.c,{to:"/",className:"flex items-center text-white mx-3",children:Object(i.jsx)("span",{className:"text-xl font-bold",children:"Daily Report"})}),e.loggedIn||r?Object(i.jsx)(a,{logoutHandler:function(){localStorage.removeItem("authToken"),e.setLoggedIn(!1),t("/login",{replace:!0})}}):null]})})})})};var v=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(i.jsxs)("div",{className:"App font-dm-sans",children:[Object(i.jsx)(f,{loggedIn:r,setLoggedIn:n}),Object(i.jsx)("div",{className:"pt-20",children:Object(i.jsxs)(l.e,{children:[Object(i.jsx)(l.c,{path:"/*",element:Object(i.jsx)(d,{}),children:Object(i.jsx)(l.c,{index:!0,element:Object(i.jsx)(g,{})})}),Object(i.jsx)(l.c,{path:"/login",element:Object(i.jsx)(x,{setLoggedIn:n})}),Object(i.jsx)(l.c,{path:"/register",element:Object(i.jsx)(O,{setLoggedIn:n})})]})})]})},w=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,50)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(p.a,{children:Object(i.jsx)(v,{})})}),document.getElementById("root")),w()}},[[49,1,2]]]);
//# sourceMappingURL=main.d45722a5.chunk.js.map